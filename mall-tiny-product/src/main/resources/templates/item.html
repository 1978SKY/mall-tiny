<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <base href="http://124.222.56.141">
    <title>商品详情页</title>
    <link rel="stylesheet" type="text/css" href="/static/item/scss/shop.css"/>
    <link rel="stylesheet" type="text/css" href="/static/item/scss/main.css"/>
    <link rel="stylesheet" href="/static/item/scss/header.css"/>
    <link rel="stylesheet" type="text/css" href="/static/item/bootstrap/css/bootstrap.css"/>
</head>
<body>
<div id="max">
    <header>
        <div class="min">
            <ul class="header_ul_left">
                <li><a href="#">首页</a></li>
            </ul>
            <ul class="header_ul_right">
                <li style="border: 0;">
                    <a th:if="${session.loginUser != null}">你好, [[${session.loginUser.nickname}]]</a>
                    <a th:if="${session.loginUser == null}" href="http://auth.mall.com/api/auth/login.html">你好，请登录</a>
                </li>
                <li><a href="../注册页面\index.html" style="color: red;">免费注册</a> |</li>
                <li><a href="javascript:;" class="aa">我的订单</a> |</li>
            </ul>
        </div>
    </header>
    <nav>
        <div class="nav_min">
            <div class="nav_top">
                <div class="nav_top_one">
                    <a href="#"><img src="/static/item/img/logo1.jpg"/></a>
                </div>
                <div class="nav_top_two">
                    <input type="text"/>
                    <button>搜索</button>
                </div>
                <div class="nav_top_three">
                    <a href="../JD_Shop/One_JDshop.html">我的购物车</a>
                    <span class="glyphicon glyphicon-shopping-cart"></span>
                    <div class="nav_top_three_1">
                        <img src="/static/item/img/44.png"/>购物车还没有商品，赶紧选购吧！
                    </div>
                </div>
            </div>
            <div class="nav_down">
                <ul class="nav_down_ul">
                    <li class="nav_down_ul_1" style="width: 24%;float: left;"><a href="javascript:;">全部商品分类</a></li>
                </ul>
            </div>
        </div>
    </nav>
</div>
<div class="crumb-wrap">
    <div class="w"></div>
</div>
<div class="Shop">
    <div class="box">
        <div class="box-one ">
            <div class="boxx">
                <div class="imgbox">
                    <div class="probox">
                        <img class="img1" alt="" th:src="${item.info.skuDefaultImg}"/>
                        <div class="hoverbox"></div>
                    </div>
                    <div class="showbox">
                        <img class="img1" alt="" th:src="${item.info.skuDefaultImg}"/>
                    </div>
                </div>
                <div class="box-lh">
                    <div class="box-lh-one">
                        <ul>
                            <li th:each="img : ${item.images}" th:if="${!#strings.isEmpty(img.imgUrl)}">
                                <img th:src="${img.imgUrl}"/>
                            </li>
                        </ul>
                    </div>
                    <div id="left">
                        &lt;
                    </div>
                    <div id="right">
                        &gt;
                    </div>
                </div>
            </div>
            <div class="box-two">
                <div class="box-name" th:text="${item.info.skuTitle}">
                    华为 HUAWEI Mate 10 6GB+128GB 亮黑色 移动联通电信4G手机 双卡双待
                </div>
                <div class="box-yuyue">
                    <div class="yuyue-one">
                        <img src="/static/item/img/7270ffc3baecdd448958f9f5e69cf60f.png" alt=""/>
                        预约抢购
                    </div>
                    <div class="yuyue-two">
                        <ul>
                            <li><img src="/static/item/img/f64963b63d6e5849977ddd6afddc1db5.png"/>
                                <span class="test1">190103</span> 人预约
                            </li>
                            <li><img src="/static/item/img/36860afb69afa241beeb33ae86678093.png"/>
                                预约剩余 <span id="timer"></span></li>
                        </ul>
                    </div>
                </div>
                <div class="box-summary clear">
                    <ul>
                        <li>京东价</li>
                        <li>
                            <span>￥</span>
                            <span th:text="${#numbers.formatDecimal(item.info.price,3,2)}">4499.00</span>
                        </li>
                        <li style="color: red" th:if="${item.seckillSkuDTO != null}">
                            <span th:if="${#dates.createNow().getTime() < item.seckillSkuDTO.startTime}">
                                商品将会在[[${#dates.format(new java.util.Date(item.seckillSkuDTO.startTime),"yyyy-MM-dd HH:mm:ss")}]]进行秒杀
                            </span>
                            <span th:if="${#dates.createNow().getTime() >= item.seckillSkuDTO.startTime && #dates.createNow().getTime() <= item.seckillSkuDTO.endTime}">
                                秒杀价  [[${#numbers.formatDecimal(item.seckillSkuDTO.seckillPrice,1,2)}]]
                            </span>
                        </li>
                        <li>
                            <a href="/static/item/">
                                预约说明
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="box-wrap clear">
                    <div class="box-wrap-one clear">
                        <ul>
                            <li>增值业务</li>
                            <li><img src="/static/item/img/90a6fa41d0d46b4fb0ff6907ca17c478.png"/>
                            </li>
                            <li><img src="/static/item/img/2e19336b961586468ef36dc9f7199d4f.png"/>
                            </li>
                            <li><img src="/static/item/img/1f80c3d6fabfd3418e54b005312c00b5.png"/>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="box-attr-3">
                    <div class="box-attr clear" th:each="attr : ${item.saleAttr}">
                        <dl>
                            <dt>
                                选择[[${attr.attrName}]]
                            </dt>
                            <dd th:each="vals : ${attr.attrValues}">
                                <a class="sku_attr_value"
                                   th:attr="skus=${vals.skuIds},class=${#lists.contains(#strings.listSplit(vals.skuIds,','), item.info.skuId.toString())?'sku_attr_value checked':'sku_attr_value'}">
                                    [[${vals.attrValue}]] </a>
                            </dd>
                        </dl>
                    </div>
                </div>
                <div class="box-btns clear">
                    <div class="box-btns-one">
                        <input type="text" name="" id="productNum" value="1"/>
                        <div class="box-btns-one1">
                            <div>
                                <button id="jia">+</button>
                            </div>
                            <div>
                                <button id="jian">-</button>
                            </div>
                        </div>
                    </div>
                    <div class="box-btns-two" th:if="${item.seckillSkuDTO == null}">
                        <a class="addToCart" href="#" th:attr="skuId=${item.info.skuId}">
                            加入购物车
                        </a>
                    </div>
                    <div class="box-btns-two"
                         th:if="${item.seckillSkuDTO != null && (#dates.createNow().getTime() >= item.seckillSkuDTO.startTime && #dates.createNow().getTime() <= item.seckillSkuDTO.endTime)}">
                        <a class="seckill" href="#"
                           th:attr="skuId=${item.info.skuId},sessionId=${item.seckillSkuDTO.promotionSessionId},code=${item.seckillSkuDTO.randomCode}">
                            立即抢购
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="ShopXiangqing">
        <div class="allLeft">
            <!--火热预约-->
            <div class="huoreyuyue">
                <h3>火热预约</h3>
            </div>
            <div class="dangeshopxingqing">
                <ul class="shopdange">
                    <li><a href="##"><img src="/static/item/img/5a0afeddNb34732af.jpg"/></a>
                        <p><a href="##">OPPO R11s Plus 双卡双待全面屏拍照手机香槟色 全网通(6G RAM+64G ROM)标配</a></p>
                        <p><strong class="J-p-20015341974">￥3699.00</strong></p></li>
                    <li><a href="##"><img src="/static/item/img/5a12873eN41754123.jpg"/></a>
                        <p><a target="_blank" title="詹姆士（GEMRY） R19plus全网通4G 智能手机 双卡双待 6+128GB 鳄鱼纹雅致版（新品预约）"
                              href="/item.html.bak/item.jd.com/20348283521.html">詹姆士（GEMRY） R19plus全网通4G 智能手机 双卡双待
                            6+128GB 鳄鱼纹雅致版（新品预约） </a></p>
                        <p><strong class="J-p-20348283521">￥13999.00</strong></p></li>
                    <li><a href="##"><img src="/static/item/img/59ec0131Nf239df75.jpg"/></a>
                        <p><a target="_blank" title="斐纳（TOMEFON） 德国家用无线无绳手持立式充电吸尘器 静音大吸力吸尘器TF-X60"
                              href="/item.html.bak/item.jd.com/16683419775.html">斐纳（TOMEFON） 德国家用无线无绳手持立式充电吸尘器
                            静音大吸力吸尘器TF-X60 </a></p>
                        <p><strong class="J-p-16683419775">￥1599.00</strong></p></li>
                    <li><a href="##"><img src="/static/item/img/59015444N27317512.jpg"/></a>
                        <p><a target="_blank" title="斐纳（TOMEFON） 扫地机器人德国智能导航规划全自动超薄扫地机器人吸尘器TF-D60 香槟金"
                              href="/item.html.bak/item.jd.com/12187770381.html">斐纳（TOMEFON）
                            扫地机器人德国智能导航规划全自动超薄扫地机器人吸尘器TF-D60 香槟金</a></p>
                        <p><strong class="J-p-12187770381">￥2599.00</strong></p></li>
                </ul>
            </div>
        </div>
        <!--商品介绍-->
        <div class="allquanbushop">
            <ul class="shopjieshao">
                <li class="jieshoa" style="background: #e4393c;"><a href="##" style="color: white;">商品介绍</a></li>
                <li class="baozhuang"><a href="##">规格与包装</a></li>
                <li class="baozhang"><a href="##">售后保障</a></li>
                <li class="pingjia"><a href="##">商品评价(4万+)</a></li>
                <li class="shuoming"><a href="##">预约说明</a></li>
            </ul>
            <button class="Lijiyuyuessss">立即预约</button>
            <ul class="shopjieshaos posi" style="display: none;">
                <li class="jieshoa" style="background: #e4393c;"><a href="#li1" style="color: white;">商品介绍</a></li>
                <li class="baozhuang"><a href="#li2">规格与包装</a></li>
                <li class="baozhang"><a href="#li3">售后保障</a></li>
                <li class="pingjia"><a href="#li4">商品评价(4万+)</a></li>
                <li class="shuoming"><a href="#li5">预约说明</a></li>
            </ul>
            <!--商品详情-->
            <div class="huawei">
                <ul class="xuanxiangka">
                    <!--商品介绍-->
                    <li class="jieshoa actives" id="li1">
                        <div class="shanpinsssss">
                            <img class="xiaoguo" th:each="descp : ${#strings.listSplit(item.desc.decript,',')}"
                                 th:src="${descp}"/>
                            <div class="guiGebox guiGebox1">
                                <div class="guiGe" th:each="guige : ${item.groupAttrs}">
                                    <h3 th:text="${guige.groupName}">主体</h3>
                                </div>
                                <div class="package-list">
                                    <h3>包装清单</h3>
                                    <p>手机（含内置电池） X 1、5A大电流华为SuperCharge充电器X 1、5A USB数据线 X 1、半入耳式线控耳机 X 1、快速指南X 1、三包凭证 X
                                        1、取卡针 X 1、保护壳 X 1</p>
                                </div>
                            </div>
                        </div>
                    </li>
                    <!--规格包装-->
                    <li class="baozhuang actives" id="li2">
                        <div class="guiGebox">
                            <div class="guiGe" th:each="group : ${item.groupAttrs}">
                                <h3 th:text="${group.groupName}">主体</h3>
                                <dl>
                                    <div th:each="attr : ${group.attrs}">
                                        <dt th:text="${attr.attrName}">
                                            品牌
                                        </dt>
                                        <dd th:text="${attr.attrValue}">
                                            华为(HUAWEI)
                                        </dd>
                                    </div>
                                </dl>
                            </div>
                            <div class="package-list">
                                <h3>包装清单</h3>
                                <p>手机（含内置电池） X 1、5A大电流华为SuperCharge充电器X 1、5A USB数据线 X 1、半入耳式线控耳机 X 1、快速指南X 1、三包凭证 X
                                    1、取卡针 X 1、保护壳 X 1</p>
                            </div>
                        </div>
                    </li>
                    <!--保障-->
                    <li class="baozhang actives" id="li3">
                        <div class="oBox">
                            <div class="shuoHou">
                                <div class="baoZhang">
                                    <h2>售后保障</h2>
                                </div>
                            </div>
                            <!--厂家服务-->
                            <div class="changJia">
                                <div class="lianBao">
                                    <span class="oImg"> <img src="/static/item/img/2017.jpg"
                                                             alt=""/> <h3>厂家服务</h3> </span>
                                    <div class="wenZi">
                                        本产品全国联保，享受三包服务，质保期为：一年保
                                        <br/> 如因质量问题或故障，凭厂商维修中心或特约维修点的质量检测证明，享受7日内退货，15日内换货，15日以上在保质期内享受免费保修等安保服务！
                                        <br/> (注：如厂家在商品介绍中有售后保障的说明，则此商品按照厂家说明执行售后保障服务。)您可以查询本品牌在各地售后服务中心的练习方式
                                        <a href="/">请点击这儿查询...</a>
                                        <br/>
                                        <br/>
                                    </div>
                                </div>
                                <div class="lianBao oCn">
                                    <span class="oImg"> <img src="/static/item/img/2017.jpg"
                                                             alt=""/> <h3>京东承诺</h3> </span>
                                    <div class="wenZi">
                                        本产品全国联保，享受三包服务，质保期为：一年保
                                        <br/> 如因质量问题或故障，凭厂商维修中心或特约维修点的质量检测证明，享受7日内退货，15日内换货，15日以上在保质期内享受免费保修等安保服务！
                                        <br/> (注：如厂家在商品介绍中有售后保障的说明，则此商品按照厂家说明执行售后保障服务。)您可以查询本品牌在各地售后服务中心的练习方式
                                        <a href="/">请点击这儿查询...</a>
                                        <br/>
                                        <br/>
                                        <br/>
                                    </div>
                                </div>
                                <div class="lianBao ">
                                    <span class="oImg"> <img src="/static/item/img/2017.jpg"
                                                             alt=""/> <h3>正品行货</h3> </span>
                                    <div class="wenZi hangHuo">
                                        京东商城向您保证所售商品均为正品行货，京东自营商品开具机打发票或电子发票。
                                    </div>
                                </div>
                                <div class="lianBao quanGuo">
                                    <span class="oImg"> <img src="/static/item/img/2017-1.jpg"
                                                             alt=""/> <h3>全国联保</h3> </span>
                                    <div class="wenZi">
                                        凭质保证书及京东商城发票，可享受全国联保服务（奢侈品、钟表除外；奢侈品、钟表由京东联系保修，享受法定三包售后服务），与您亲临商场选购的商品享受相同的质量保证。京东商城还为您提供具有竞争力的商品价格和运费政策，请您放心购买！
                                        <br/>
                                        注：因厂家会在没有任何提前通知的情况下更改产品包装、产地或者一些附件，本司不能确保客户收到的货物与商城图片、产地、附件说明完全一致。只能确保为原厂正货！并且保证与当时市场上同样主流新品一致。若本商城没有及时更新，请大家谅解！
                                    </div>
                                </div>
                                <!--权利声明-->
                                <div class="quanLi">
                                    <h4>权利声明:</h4>
                                    <div class="jingDong">
                                        京东上的所有商品信息、客户评价、商品咨询、网友讨论等内容，是京东重要的经营资源，未经许可，禁止非法转载使用。
                                        <br/>
                                        <span class="oZhu">注</span>：本站商品信息均来自于合作方，其真实性、准确性和合法性由信息拥有者（合作方）负责。本站不提供任何保证，并不承担任何法律责任。
                                    </div>
                                </div>
                                <div class="quanLi jiaGe">
                                    <h4>价格说明:</h4>
                                    <div class="jingDong">
                                        <span class="oZhu">京东价</span>：京东价为商品的销售价，是您最终决定是否购买商品的依据。
                                        <br/>
                                        <span class="oZhu">划线价</span>：商品展示的划横线价格为参考价，该价格可能是品牌专柜标价、商品吊牌价或由品牌供应商提供的正品零售价（如厂商指导价、建议零售价等）或该商品在京东平台上曾经展示过的销售价；由于地区、时间的差异性和市场行情波动，品牌专柜标价、商品吊牌价等可能会与您购物时展示的不一致，该价格仅供您参考。
                                        <br/>
                                        <span class="oZhu">折扣</span>：如无特殊说明，折扣指销售商在原价、或划线价（如品牌专柜标价、商品吊牌价、厂商指导价、厂商建议零售价）等某一价格基础上计算出的优惠比例或优惠金额；如有疑问，您可在购买前联系销售商进行咨询。
                                        <br/>
                                        <span class="oZhu">异常问题</span>：商品促销信息以商品详情页“促销”栏中的信息为准；商品的具体售价以订单结算页价格为准；如您发现活动商品售价或促销信息有异常，建议购买前先联系销售商咨询。
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <!--评价-->
                    <li class="PINgjia actives" id="li4">
                        <div class="h3">
                            <h3>商品评价</h3>
                        </div>
                        <div class="nav">
                            <div class="left">
                                <p class="haoping">好评度</p>
                                <p><span>100%</span></p>
                            </div>
                            <div class="right">
                                <ul>
                                    <li><a href="/">就是快（424）</a></li>
                                    <li><a href="/">物流很快（254） </a></li>
                                    <li><a href="/">货真价实（168）</a></li>
                                    <li><a href="/">有档次（158）</a></li>
                                    <li><a href="/">国产品牌（133）</a></li>
                                    <li><a href="/">外形美观（103）</a></li>
                                    <li><a href="/">很给力（75）</a></li>
                                    <li><a href="/">反应灵敏（68）</a></li>
                                    <li><a href="/">性价比高（60）</a></li>
                                    <li><a href="/">价格优惠（50）</a></li>
                                    <li><a href="/">功能齐全（49）</a></li>
                                    <li style="background: gainsboro;"><a href="/">速度太慢（5）</a></li>
                                </ul>
                            </div>
                        </div>
                        <!--全部评价-->
                        <div class="allpingjia">
                            <ul>
                                <li><a href="/">全部评价（4.2万）</a></li>
                                <li><a href="/">晒图（500）</a></li>
                                <li><a href="/">追拼（200+）</a></li>
                                <li><a href="/">好评（4.1万）</a></li>
                                <li><a href="/">中评（100+）</a></li>
                                <li><a href="/">差评（100+）</a></li>
                                <li><a href="/"><input type="checkbox"/>只看当前商品价格</a></li>
                                <li class="imga" style="float: right;"><a href="/">推荐排序 <img
                                        src="/static/item/img/animaite.png"/> </a></li>
                            </ul>
                        </div>
                    </li>
                    <!--说明-->
                    <li class="shuoming actives" id="li5"></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="Fixedbian">
    <ul>
        <li class="li1"><a class="aaa">顶部</a></li>
    </ul>
</div>
<div class="gouwuchexiaguo">
    <img src="/static/item/img/44.png"/>
    <span>购物车还没有商品，赶紧选购吧！</span>
</div>
<script src="/static/item/js/jquery1.9.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/item/js/js.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">

    // 添加购物车
    $(".addToCart").click(function () {
        let skuId = $(this).attr("skuId");
        let num = $("#productNum").val();
        location.href = "http://cart.mall.com/api/cart/addCartItem?skuId=" + skuId + "&num=" + num;
        return false;
    });

    /*function switchSkuId() {
        // 被选中属性
        var checkDivs = $(".redborder div");
        var valueIds = "";
        // 拼接成属性值串
        for (var i = 0; i < checkDivs.length; i++) {
            var saleAttrValueDiv = checkDivs.eq(i);
            if (i > 0) {
                valueIds = valueIds + "|";
            }
            valueIds = valueIds + saleAttrValueDiv.attr("value");
        }
        //页面上的hashjson
        var valuesSku = $("#valuesSku").attr("value");
        var valuesSkuJson = JSON.parse(valuesSku);

        // 看看hash有没有
        var skuId = valuesSkuJson[valueIds];
        // 当前sku
        var skuIdSelf = $("#skuId").val();

        // 判断是否跳转
        if (skuId) {
            if (skuId == skuIdSelf) {
                $("#cartBtn").attr("class", "box-btns-two");
            } else {
                window.location.href = "/" + skuId + ".html";
            }
        } else {
            $("#cartBtn").attr("class", "box-btns-two-off");
        }
    }*/
    // 切换商品
    $(".sku_attr_value").click(function () {
        var skus = new Array();
        // 1.获取所有加了checked的属性
        // 1.1 点击的元素加上自定义属性
        $(this).addClass("clicked");
        var curr = $(this).attr("skus").split(",");
        // 当前被点击的所有sku组合的数组放进去
        skus.push(curr)
        // 去掉同一行所有的checked
        $(this).parent().parent().find(".sku_attr_value").removeClass("checked");

        $("a[class='sku_attr_value checked']").each(function () {
            skus.push($(this).attr("skus").split(","));
        });
        // 2.取出他们的交集 得到skuId 调用filter方法的一定是jQuery元素
        var filterEle = skus[0];
        for (var i = 1; i < skus.length; i++) {
            filterEle = $(filterEle).filter(skus[i]);
        }
        console.log(filterEle[0])
        // 3.跳转
        location.href = "http://mall.com/api/product/item/" + filterEle[0] + ".html";
    });
    // 属性的回显
    $(function () {
        $(".sku_attr_value").parent().css({"border": "solid 1px #CCC"});
        $("a[class='sku_attr_value checked']").parent().css({"border": "solid 1px red"});
    })

    // 秒杀
    $(".seckill").click(function () {
        var isLogin = [[${session.loginUser != null}]];     //true
        if (isLogin) {
            var killId = $(this).attr("sessionid") + "-" + $(this).attr("skuid");
            var code = $(this).attr("code");
            var num = $("#productNum").val();
            location.href = "http://seckill.mall.com/api/seckill/kill?killId=" + killId + "&key=" + code + "&num=" + num;
        } else {
            alert("请先登录再进行秒杀!");
        }
        return false;
    });
</script>
</body>
</html>